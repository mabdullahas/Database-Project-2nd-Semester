<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="denz.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="2631"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="Accounts" custom_title="0" dock_id="2" table="4,8:mainAccounts"/><table title="Accounts" custom_title="0" dock_id="4" table="4,8:mainAccounts"/><table title="Accounts" custom_title="0" dock_id="3" table="4,8:mainAccounts"/><table title="Accounts" custom_title="0" dock_id="5" table="4,8:mainAccounts"/><table title="Accounts" custom_title="0" dock_id="6" table="4,8:mainAccounts"/><table title="Accounts" custom_title="0" dock_id="7" table="4,8:mainAccounts"/><dock_state state="000000ff00000000fd00000001000000020000033b00000226fc0100000002fb000000160064006f0063006b00420072006f00770073006500310100000000000002480000000000000000fc000000000000033b0000011800fffffffa000000000100000006fb000000160064006f0063006b00420072006f00770073006500320100000000ffffffff0000011800fffffffb000000160064006f0063006b00420072006f00770073006500330100000000ffffffff0000011800fffffffb000000160064006f0063006b00420072006f00770073006500340100000000ffffffff0000011800fffffffb000000160064006f0063006b00420072006f00770073006500350100000000ffffffff0000011800fffffffb000000160064006f0063006b00420072006f00770073006500360100000000ffffffff0000011800fffffffb000000160064006f0063006b00420072006f00770073006500370100000000ffffffff0000011800ffffff0000033b0000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="Accounts" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="0" mode="1"/></sort><column_widths><column index="1" value="69"/><column index="2" value="56"/><column index="3" value="157"/><column index="4" value="125"/><column index="5" value="127"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Employees" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="79"/><column index="2" value="56"/><column index="3" value="69"/><column index="4" value="66"/><column index="5" value="140"/><column index="6" value="85"/><column index="7" value="62"/><column index="8" value="148"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="POS_Transactions" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="88"/><column index="2" value="56"/><column index="3" value="81"/><column index="4" value="53"/><column index="5" value="156"/><column index="6" value="84"/><column index="7" value="78"/><column index="8" value="39"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Payments" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="74"/><column index="2" value="90"/><column index="3" value="106"/><column index="4" value="51"/><column index="5" value="61"/><column index="6" value="156"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Products" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="69"/><column index="2" value="54"/><column index="3" value="70"/><column index="4" value="93"/><column index="5" value="72"/><column index="6" value="46"/><column index="7" value="46"/><column index="8" value="91"/><column index="9" value="156"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Shifts" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="50"/><column index="2" value="81"/><column index="3" value="56"/><column index="4" value="156"/><column index="5" value="115"/><column index="6" value="132"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Stores" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="54"/><column index="2" value="140"/><column index="3" value="93"/><column index="4" value="93"/><column index="5" value="156"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Suppliers" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="70"/><column index="2" value="109"/><column index="3" value="87"/><column index="4" value="85"/><column index="5" value="132"/><column index="6" value="101"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="TransactionItems" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="51"/><column index="2" value="90"/><column index="3" value="71"/><column index="4" value="55"/><column index="5" value="65"/><column index="6" value="56"/><column index="7" value="54"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="sqlite_sequence" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="132"/><column index="2" value="101"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">PRAGMA foreign_keys = ON;

CREATE TABLE Stores (
  store_id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  address TEXT,
  phone TEXT,
  created_at TEXT DEFAULT (datetime('now'))
);

CREATE TABLE Suppliers (
  supplier_id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  contact_name TEXT,
  phone TEXT,
  email TEXT,
  address TEXT
);

CREATE TABLE Products (
  product_id INTEGER PRIMARY KEY AUTOINCREMENT,
  sku TEXT UNIQUE,
  name TEXT NOT NULL,
  description TEXT,
  supplier_id INTEGER,
  price REAL NOT NULL,
  cost REAL,
  stock_quantity INTEGER DEFAULT 0,
  created_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (supplier_id) REFERENCES Suppliers(supplier_id)
);

CREATE TABLE Employees (
  employee_id INTEGER PRIMARY KEY AUTOINCREMENT,
  store_id INTEGER,
  first_name TEXT,
  last_name TEXT,
  email TEXT,
  phone TEXT,
  role TEXT,
  hired_date TEXT,
  FOREIGN KEY (store_id) REFERENCES Stores(store_id)
);

CREATE TABLE Shifts (
  shift_id INTEGER PRIMARY KEY AUTOINCREMENT,
  employee_id INTEGER NOT NULL,
  store_id INTEGER,
  start_time TEXT NOT NULL,
  end_time TEXT,
  note TEXT,
  FOREIGN KEY (employee_id) REFERENCES Employees(employee_id),
  FOREIGN KEY (store_id) REFERENCES Stores(store_id)
);

CREATE TABLE POS_Transactions (
  transaction_id INTEGER PRIMARY KEY AUTOINCREMENT,
  store_id INTEGER,
  employee_id INTEGER,
  shift_id INTEGER,
  transaction_time TEXT DEFAULT (datetime('now')),
  total_amount REAL,
  status TEXT DEFAULT 'completed',
  notes TEXT,
  FOREIGN KEY (store_id) REFERENCES Stores(store_id),
  FOREIGN KEY (employee_id) REFERENCES Employees(employee_id),
  FOREIGN KEY (shift_id) REFERENCES Shifts(shift_id)
);

CREATE TABLE TransactionItems (
  item_id INTEGER PRIMARY KEY AUTOINCREMENT,
  transaction_id INTEGER NOT NULL,
  product_id INTEGER,
  quantity INTEGER NOT NULL DEFAULT 1,
  unit_price REAL NOT NULL,
  discount REAL DEFAULT 0,
  subtotal REAL,
  FOREIGN KEY (transaction_id) REFERENCES POS_Transactions(transaction_id),
  FOREIGN KEY (product_id) REFERENCES Products(product_id)
);

CREATE TABLE Payments (
  payment_id INTEGER PRIMARY KEY AUTOINCREMENT,
  transaction_id INTEGER NOT NULL,
  payment_method TEXT NOT NULL,
  amount REAL NOT NULL,
  reference TEXT,
  paid_at TEXT DEFAULT (datetime('now')),
  FOREIGN KEY (transaction_id) REFERENCES POS_Transactions(transaction_id)
);

CREATE TABLE Accounts (
  account_id INTEGER PRIMARY KEY AUTOINCREMENT,
  store_id INTEGER,
  name TEXT NOT NULL,
  type TEXT,
  balance REAL DEFAULT 0,
  FOREIGN KEY (store_id) REFERENCES Stores(store_id)
);
</sql><sql name="SQL 2">INSERT INTO Stores (name,address,phone) VALUES ('Moiz book depot','Urdu Bazar','03237766581');

INSERT INTO Suppliers (name,contact_name,phone,email,address)
 VALUES ('Acme Supplies','Khizar','03045635672','acme@gmail.com','Abid Road');

INSERT or IGNORE INTO Products (sku,name,description,supplier_id,price,cost,stock_quantity)
 VALUES ('SKU001','Notebook','A5 notebook',1,200.00,120.00,50);

INSERT INTO Employees (store_id,first_name,last_name,email,phone,role)
 VALUES (1,'Ahmed','Khan','ahmed@gmail.com','03024565473','Cashier');

INSERT INTO Shifts (employee_id,store_id,start_time) VALUES (1,1,'2025-08-11 09:00:00');

INSERT INTO POS_Transactions (store_id,employee_id,shift_id,total_amount,status)
 VALUES (1,1,1,400.00,'completed');

INSERT INTO TransactionItems (transaction_id,product_id,quantity,unit_price,discount,subtotal)
 VALUES (1,1,2,200.00,0,400.00);

INSERT INTO Payments (transaction_id,payment_method,amount,reference) VALUES (1,'cash',400.00,'');

</sql><sql name="SQL 3*">INSERT INTO Accounts (store_id, name, type, balance) VALUES
(1, 'Cash Register ', 'Cash', 5000.00),
(1, 'Bank Account ', 'Bank', 20000.00),
(1, 'Supplier Credit', 'Liability', -15000.00);
</sql><current_tab id="2"/></tab_sql></sqlb_project>
